---
title: 工具单元测试
lang: zh-CN
---

    <link rel="stylesheet" href="/tools/test-runner.css">

    <div id="output" class="console"></div>
    
    <script src="/cache/crypto-js.min.local.js"></script>
    <script>
        // Prevent auto-initialization in test environment
        const originalAddEventListener = document.addEventListener;
        document.addEventListener = (event, handler) => {
            if (event === 'DOMContentLoaded' && handler.toString().includes('new ')) {
                return; // Skip auto-initialization
            }
            originalAddEventListener.call(document, event, handler);
        };
    </script>
    <script src="/tools/test-framework.local.js"></script>
    <script>
        // Initialize framework
        const framework = new TestFramework();
        framework.currentTool = null;
        
        // Restore addEventListener
        document.addEventListener = originalAddEventListener;
    </script>
    <script>
        framework.currentTool = 'json-validator';
    </script>
    <script src="/tools/json-validator/json-validator.local.js"></script>
    <script src="/tools/json-validator/test.local.js"></script>
    <script>
        framework.currentTool = 'case-converter';
    </script>
    <script src="/tools/case-converter/test.local.js"></script>
    <script>
        framework.currentTool = 'hash-text';
    </script>
    <script src="/tools/hash-text/test.local.js"></script>
    <script>
        framework.currentTool = 'url-parser';
    </script>
    <script src="/tools/url-parser/test.local.js"></script>
    <script>
        framework.currentTool = 'temperature-converter';
    </script>
    <script src="/tools/temperature-converter/test.local.js"></script>
    <script>
        framework.currentTool = 'text-statistics';
    </script>
    <script src="/tools/text-statistics/test.local.js"></script>
    <script>
        framework.currentTool = 'sql-prettify';
    </script>
    <script src="/tools/sql-prettify/test.local.js"></script>
    <script>
        framework.currentTool = 'crontab-generator';
    </script>
    <script src="/tools/crontab-generator/test.local.js"></script>
    <script>
        framework.currentTool = 'ipv4-subnet-calculator';
    </script>
    <script src="/tools/ipv4-subnet-calculator/test.local.js"></script>
    <script>
        framework.currentTool = 'base64-converter';
    </script>
    <script src="/tools/base64-converter/base64-converter.local.js"></script>
    <script src="/tools/base64-converter/test.local.js"></script>
    <script>
        framework.currentTool = 'x509-decoder';
    </script>
    <script src="/cache/jsrsasign-all.min.local.js"></script>
    <script src="/tools/x509-decoder/x509-decoder.local.js"></script>
    <script src="/tools/x509-decoder/test.local.js"></script>
    <script src="/tools/x509-decoder/test.r11.local.js"></script>
    <script src="/tools/x509-decoder/test.irsg.local.js"></script> 
    <script src="/tools/x509-decoder/test.full.local.js"></script>      
    <script>
        framework.currentTool = 'png-metadata-checker';
    </script>
    <script src="/tools/png-metadata-checker/png-metadata-checker.local.js"></script>
    <script src="/tools/png-metadata-checker/test.local.js"></script>
    <script>
        framework.currentTool = 'exif-extractor';
    </script>
    <script src="/tools/exif-extractor/exif-tags.local.js"></script>
    <script src="/tools/exif-extractor/exif-extractor.local.js"></script>
    <script src="/tools/exif-extractor/test.local.js"></script>
    <script>
        framework.currentTool = 'json-yaml-converter';
    </script>
    <script src="/cache/js-yaml.min.local.js"></script>
    <script src="/tools/json-yaml-converter/json-yaml-converter.local.js"></script>
    <script src="/tools/json-yaml-converter/test.local.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const output = document.getElementById('output');
            const originalLog = console.log;
            const tools = {};
            
            console.log = (message) => {
                const text = String(message);
                const match = text.match(/^([✓✗]) ([^:]+):(.+?)(?::(.*)?)?$/);
                
                if (match) {
                    const [, status, tool, testName, error] = match;
                    
                    if (!tools[tool]) {
                        tools[tool] = { passed: 0, failed: 0, tests: [] };
                    }
                    
                    if (status === '✓') {
                        tools[tool].passed++;
                        tools[tool].tests.push({ name: testName, status: 'passed' });
                    } else {
                        tools[tool].failed++;
                        tools[tool].tests.push({ name: testName, status: 'failed', error: error?.trim() });
                    }
                    return;
                }
                
                if (text.includes('Results:')) {
                    output.innerHTML = 'Running tests...\n\n';
                    Object.keys(tools).sort().forEach(tool => {
                        const t = tools[tool];
                        const total = t.passed + t.failed;
                        if (total > 0) {
                            output.innerHTML += `<strong>${tool}</strong>: ${t.passed}/${total} passed\n`;
                            t.tests.forEach(test => {
                                if (test.status === 'passed') {
                                    output.innerHTML += `<span class="passed">  ✓ ${test.name}</span>\n`;
                                } else {
                                    output.innerHTML += `<span class="failed">  ✗ ${test.name}${test.error ? ': ' + test.error.replace(/</g, '&lt;').replace(/>/g, '&gt;') : ''}</span>\n`;
                                }
                            });
                        }
                    });
                    output.innerHTML += '\n' + text.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '\n';
                }
            };
            
            framework.run();
            console.log = originalLog;
        });
    </script>
